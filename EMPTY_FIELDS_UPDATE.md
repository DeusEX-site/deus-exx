# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—É—Å—Ç—ã—Ö –ø–æ–ª–µ–π

## –ü—Ä–æ–±–ª–µ–º–∞
–°–∏—Å—Ç–µ–º–∞ –Ω–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∞ –ø—É—Å—Ç—ã–µ –ø–æ–ª—è –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö. –ü–æ–ª—è –º–æ–≥—É—Ç –±—ã—Ç—å:
- –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º–∏
- –ü—É—Å—Ç—ã–º–∏ (—Ç–æ–ª—å–∫–æ –ø—Ä–æ–±–µ–ª—ã)
- –°–æ–¥–µ—Ä–∂–∞—Ç—å —Å–∏–º–≤–æ–ª "-" (—á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è)

## –†–µ—à–µ–Ω–∏–µ
–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `isEmpty()` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—É—Å—Ç—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤—Å–µ—Ö –ø–æ–ª–µ–π.

### –§—É–Ω–∫—Ü–∏—è isEmpty()
```php
private function isEmpty($value)
{
    if ($value === null) return true;
    $trimmed = trim($value);
    return $trimmed === '' || $trimmed === '-';
}
```

### –ü—Ä–∞–≤–∏–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—É—Å—Ç—ã—Ö –ø–æ–ª–µ–π

1. **Total**: 
   - –ü—É—Å—Ç–æ–µ/"-" ‚Üí –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å (-1)
   - –ß–∏—Å–ª–æ ‚Üí —ç—Ç–æ —á–∏—Å–ª–æ

2. **Schedule**: 
   - –ü—É—Å—Ç–æ–µ/"-" ‚Üí 24/7 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   - –ó–Ω–∞—á–µ–Ω–∏–µ ‚Üí —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ

3. **Date**: 
   - –ü—É—Å—Ç–æ–µ/"-" ‚Üí –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å (null)
   - –ó–Ω–∞—á–µ–Ω–∏–µ ‚Üí —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ (—Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –≥–æ–¥–∞ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

4. **Language**: 
   - –ü—É—Å—Ç–æ–µ/"-" ‚Üí "en" (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   - –ó–Ω–∞—á–µ–Ω–∏–µ ‚Üí —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ

5. **Funnel**: 
   - –ü—É—Å—Ç–æ–µ/"-" ‚Üí null
   - –ó–Ω–∞—á–µ–Ω–∏–µ ‚Üí —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ

6. **Pending ACQ / Freeze status**: 
   - –ü—É—Å—Ç–æ–µ/"-" ‚Üí false
   - Yes/True/1/–î–∞ ‚Üí true
   - –û—Å—Ç–∞–ª—å–Ω–æ–µ ‚Üí false

7. **Geo**: 
   - –ü—É—Å—Ç–æ–µ/"-" ‚Üí –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è
   - –ó–Ω–∞—á–µ–Ω–∏–µ ‚Üí –ø–∞—Ä—Å–∏—Ç—Å—è –∏ —Ä–∞–∑–¥–µ–ª—è–µ—Ç—Å—è

8. **Affiliate / Recipient**: 
   - –ü—É—Å—Ç–æ–µ/"-" ‚Üí –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è)
   - –ó–Ω–∞—á–µ–Ω–∏–µ ‚Üí —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ

## –ü—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø—É—Å—Ç—ã–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
```
Affiliate: TestAff
Recipient: TestRec
Cap: 15
Total: 
Geo: US
Language: 
Funnel: 
Schedule: 
Date: 
Pending ACQ: 
Freeze status on ACQ: 
```
–†–µ–∑—É–ª—å—Ç–∞—Ç: Total=–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å, Language="en", Schedule=24/7, Date=–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å, Funnel=null, Pending ACQ=false, Freeze=false

### –ü—Ä–∏–º–µ—Ä 2: –ü–æ–ª—è —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º "-"
```
Affiliate: TestAff
Recipient: TestRec
Cap: 10
Total: -
Geo: DE
Language: -
Funnel: -
Schedule: -
Date: -
Pending ACQ: -
Freeze status on ACQ: -
```
–†–µ–∑—É–ª—å—Ç–∞—Ç: Total=–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å, Language="en", Schedule=24/7, Date=–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å, Funnel=null, Pending ACQ=false, Freeze=false

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã
- `app/Services/CapAnalysisService.php` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è isEmpty() –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤—Å–µ—Ö –ø–æ–ª–µ–π
- `app/Console/Commands/UpdateToNewCapFormat.php` - –¥–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç —Å –ø—É—Å—Ç—ã–º–∏ –ø–æ–ª—è–º–∏
- `NEW_CAP_FORMAT_README.md` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å –Ω–æ–≤—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–î–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç –≤ –∫–æ–º–∞–Ω–¥–µ `UpdateToNewCapFormat` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—É—Å—Ç—ã—Ö –ø–æ–ª–µ–π –∏ –∑–Ω–∞—á–µ–Ω–∏–π "-". 

# –°–±—Ä–æ—Å –ø–æ–ª–µ–π –¥–æ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

## –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–±—Ä–æ—Å **–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö** –ø–æ–ª–µ–π –¥–æ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –ø—É—Å—Ç—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏.

## –í–∞–∂–Ω–æ: –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è

**–ù–ï–õ–¨–ó–Ø** —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
- `Affiliate:` - –≤—Å–µ–≥–¥–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–∫–∞–∑–∞–Ω
- `Recipient:` - –≤—Å–µ–≥–¥–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–∫–∞–∑–∞–Ω  
- `Geo:` - –≤—Å–µ–≥–¥–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–∫–∞–∑–∞–Ω
- `CAP:` - –≤—Å–µ–≥–¥–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–∫–∞–∑–∞–Ω (—á–∏—Å–ª–æ –±–æ–ª—å—à–µ 0)

–ï—Å–ª–∏ –ª—é–±–æ–µ –∏–∑ —ç—Ç–∏—Ö –ø–æ–ª–µ–π –ø—É—Å—Ç–æ–µ, —Å–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ –∫–∞–∫ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–µ.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ö–æ–≥–¥–∞ **–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ** –ø–æ–ª–µ —É–∫–∞–∑–∞–Ω–æ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏, –Ω–æ –ø—É—Å—Ç–æ–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Total:`), —Å–∏—Å—Ç–µ–º–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç —ç—Ç–æ –ø–æ–ª–µ –¥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ "–æ—á–∏—â–∞—Ç—å" –ø–æ–ª—è –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.

### –ü–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

1. **–ü–æ–ª–µ –Ω–µ —É–∫–∞–∑–∞–Ω–æ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏** ‚Üí –ü–æ–ª–µ –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
2. **–ü–æ–ª–µ —É–∫–∞–∑–∞–Ω–æ –∏ –Ω–µ –ø—É—Å—Ç–æ–µ** ‚Üí –ü–æ–ª–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º
3. **–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ —É–∫–∞–∑–∞–Ω–æ –Ω–æ –ø—É—Å—Ç–æ–µ** ‚Üí –ü–æ–ª–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –¥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
4. **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ —É–∫–∞–∑–∞–Ω–æ –Ω–æ –ø—É—Å—Ç–æ–µ** ‚Üí –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ –∫–∞–∫ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–µ

## –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

| –ü–æ–ª–µ | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|---------------------|----------|
| `Total` | `-1` | –ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å |
| `Schedule` | `24/7` | –ö—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞ |
| `Date` | `null` | –ë–µ—Å—Å—Ä–æ—á–Ω–∞—è –∫–∞–ø–∞ |
| `Language` | `en` | –ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫ |
| `Funnel` | `null` | –ë–µ–∑ –≤–æ—Ä–æ–Ω–∫–∏ |
| `Pending ACQ` | `false` | –ù–µ –æ–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è |
| `Freeze status` | `false` | –ù–µ –∑–∞–º–æ—Ä–æ–∂–µ–Ω–∞ |

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–±—Ä–æ—Å Total –¥–æ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏

```
Affiliate: G06
Recipient: TMedia
Geo: DE
CAP: 20
Total:
```

–†–µ–∑—É–ª—å—Ç–∞—Ç: `total_amount` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤ `-1` (–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å)

### –°–±—Ä–æ—Å —è–∑—ã–∫–∞ –¥–æ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ

```
Affiliate: G06
Recipient: TMedia
Geo: DE
CAP: 20
Language:
```

–†–µ–∑—É–ª—å—Ç–∞—Ç: `language` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤ `en`

### –°–±—Ä–æ—Å –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

```
Affiliate: G06
Recipient: TMedia
Geo: DE
CAP: 20
Total:
Language:
Funnel:
Schedule:
Date:
```

–†–µ–∑—É–ª—å—Ç–∞—Ç: –í—Å–µ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –ø–æ–ª—è —Å–±—Ä–æ—Å—è—Ç—Å—è –¥–æ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

### ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã (–Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç!)

```
Affiliate:
Recipient: TMedia
Geo: DE
CAP: 20
```
**–û—à–∏–±–∫–∞:** –ü—É—Å—Ç–æ–µ –ø–æ–ª–µ `Affiliate` - —Å–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ.

```
Affiliate: G06
Recipient: TMedia
Geo: DE
CAP:
```
**–û—à–∏–±–∫–∞:** –ü—É—Å—Ç–æ–µ –ø–æ–ª–µ `CAP` - —Å–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ.

```
Affiliate: G06
Recipient: 
Geo: DE
CAP: 20
```
**–û—à–∏–±–∫–∞:** –ü—É—Å—Ç–æ–µ –ø–æ–ª–µ `Recipient` - —Å–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ.

## –ó–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é

–ü—Ä–∏ —Å–±—Ä–æ—Å–µ –ø–æ–ª–µ–π –¥–æ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
- –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –∑–∞–ø–∏—Å–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `caps_history`
- –û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–ø–∏—Å—å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
- –ò—Å—Ç–æ—Ä–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```bash
php artisan test:cap-history-system
```

–ò–ª–∏ standalone —Ñ–∞–π–ª:
```bash
php test_cap_history_system.php
```

–¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç:
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Å–±—Ä–æ—Å–∞ –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –∏—Å—Ç–æ—Ä–∏–∏
- –ù–µ–∏–∑–º–µ–Ω–Ω–æ—Å—Ç—å –ø–æ–ª–µ–π, –Ω–µ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ CapAnalysisService

1. `isFieldSpecifiedInMessage()` - —Ç–µ–ø–µ—Ä—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –ø–æ–ª—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –ø—É—Å—Ç–æ–µ –æ–Ω–æ –∏–ª–∏ –Ω–µ—Ç
2. `getRawFieldValue()` - –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—ã—Ä–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è
3. `getFieldsToUpdate()` - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—É—Å—Ç—ã—Ö –ø–æ–ª–µ–π

### –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

```php
if ($this->isFieldSpecifiedInMessage($messageText, 'total')) {
    $rawTotalValue = $this->getRawFieldValue($messageText, 'total');
    $newTotal = $this->isEmpty($rawTotalValue) ? -1 : $newCapData['total_amount'];
    
    if ($existingCap->total_amount != $newTotal) {
        $updateData['total_amount'] = $newTotal;
    }
}
```

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–ò–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã:
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Ä–∞–Ω—å—à–µ
- –ü–æ–ª—è, –Ω–µ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏, –æ—Å—Ç–∞—é—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –ø—É—Å—Ç—ã—Ö **–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö** –ø–æ–ª–µ–π
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω—ã

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤ (–≤–µ—Ä—Å–∏—è 2.0)

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –¥–µ–∫–∞–±—Ä–µ 2024:

1. **–ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–∞—Ä—Å–∏–Ω–≥–æ–º –ø—É—Å—Ç—ã—Ö –ø–æ–ª–µ–π**: 
   - –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω—ã —Å `(.+)` –Ω–∞ `(.*)` –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ø—É—Å—Ç—ã—Ö –ø–æ–ª–µ–π
   - –¢–µ–ø–µ—Ä—å `Language:` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –¥–æ `en` (–∞ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "Funnel:")

2. **–ü—Ä–æ–±–ª–µ–º–∞ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –ø–æ–ª–µ–π —Å –¥–∞–Ω–Ω—ã–º–∏**:
   - –£–±—Ä–∞–Ω—ã –ª–∏—à–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `isset()` –∫–æ—Ç–æ—Ä—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
   - –ó–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä `??` (null coalescing) –¥–ª—è –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ–π —Ä–∞–±–æ—Ç—ã

3. **–£–ª—É—á—à–µ–Ω–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å**:
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Å—Ç—ã—Ö –ø–æ–ª–µ–π
   - –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

### üß™ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:

- ‚úÖ –°–±—Ä–æ—Å –ø—É—Å—Ç—ã—Ö –ø–æ–ª–µ–π (`Language:` ‚Üí `en`)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π —Å –¥–∞–Ω–Ω—ã–º–∏ (`Language: ru` ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è)
- ‚úÖ –ü–æ–ª—è –Ω–µ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

## –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ

- ‚úÖ **–ú–æ–∂–Ω–æ —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å**: Total, Language, Funnel, Schedule, Date, Pending ACQ, Freeze status
- ‚ùå **–ù–µ–ª—å–∑—è —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å**: Affiliate, Recipient, Geo, CAP
- üìù **–ü—Ä–∞–≤–∏–ª–æ**: –ü—É—Å—Ç–æ–µ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ = —Å–±—Ä–æ—Å –¥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- üö´ **–ü—Ä–∞–≤–∏–ª–æ**: –ü—É—Å—Ç–æ–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ = –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è 