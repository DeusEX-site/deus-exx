# üöÄ –°–∏—Å—Ç–µ–º–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –∫–∞–ø - –ì–û–¢–û–í–ê!

## üéØ –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞

**–î–û:** –ö–∞–ø—ã –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –∫–∞–∫ —Å—É–º–º–∞ `20 + 30`  
**–ü–û–°–õ–ï:** –ö–∞–∂–¥–∞—è –∫–∞–ø–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –≤ —Å–≤–æ–µ–º –±–ª–æ–∫–µ

## üìã –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### ‚úÖ 1. –°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ `caps`
- –•—Ä–∞–Ω–∏—Ç –∫–∞–∂–¥—É—é –∫–∞–ø—É –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—É—é –∑–∞–ø–∏—Å—å
- –ë—ã—Å—Ç—Ä—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø–æ–∏—Å–∫–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

### ‚úÖ 2. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞
- –ö–∞–∂–¥–∞—è –∫–∞–ø–∞ —Å–æ–∑–¥–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—É—é –∑–∞–ø–∏—Å—å
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π –∞—Ñ—Ñ–∏–ª–µ–π—Ç–æ–≤
- –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º –∫–∞–ø–∞–º

### ‚úÖ 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –ö–∞–∂–¥–æ–µ –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ö–∞–ø—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ

### ‚úÖ 4. –û–±–Ω–æ–≤–ª–µ–Ω –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –ö–∞–∂–¥–∞—è –∫–∞–ø–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –±–ª–æ–∫–µ
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω CSV —ç–∫—Å–ø–æ—Ä—Ç
- –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

## üõ†Ô∏è –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

### Windows:
```bash
setup-cap-system.bat
```

### Linux/Mac:
```bash
php artisan setup:cap-system --test
```

## üìä –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã

**–°–æ–æ–±—â–µ–Ω–∏–µ:**
```
CAP 30 Aff - Rec : RU/KZ
CAP 20 Aff2 - Rec : AU/US
10-19
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ø–æ–∏—Å–∫–µ:**

üîµ **–ó–∞–ø–∏—Å—å 1**
- –ö–∞–ø–∞: `30`
- –ê—Ñ—Ñ–∏–ª–µ–π—Ç: `Aff`
- –ë—Ä–æ–∫–µ—Ä: `Rec`
- –ì–µ–æ: `RU, KZ`
- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ: `10-19`

üîµ **–ó–∞–ø–∏—Å—å 2**
- –ö–∞–ø–∞: `20` 
- –ê—Ñ—Ñ–∏–ª–µ–π—Ç: `Aff2`
- –ë—Ä–æ–∫–µ—Ä: `Rec`
- –ì–µ–æ: `AU, US`
- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ: `10-19`

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–ö–∞–∂–¥–∞—è –∫–∞–ø–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ**  
‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞–∑–≤–∞–Ω–∏—è –∞—Ñ—Ñ–∏–ª–µ–π—Ç–æ–≤**  
‚úÖ **–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö**  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π**  
‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π CSV —ç–∫—Å–ø–æ—Ä—Ç**  

## üìù –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

- `database/migrations/2024_12_19_000005_create_caps_table.php` - –ú–∏–≥—Ä–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã
- `app/Models/Cap.php` - –ú–æ–¥–µ–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞–ø–∞–º–∏
- `app/Services/CapAnalysisService.php` - –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞
- `resources/views/cap-analysis.blade.php` - –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- `routes/web.php` - –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π API endpoint
- `app/Http/Controllers/TelegramWebhookController.php` - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑

## üîß –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```bash
# –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É
php artisan migrate:caps

# –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
php artisan analyze:existing-messages --limit=1000

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É
php artisan test:new-cap-system

# –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
php artisan setup:cap-system --test
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ù–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏
- –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±—ã—Å—Ç—Ä–æ —á–µ—Ä–µ–∑ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –ö–∞–∂–¥–∞—è –∫–∞–ø–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –±–ª–æ–∫–µ

üåê **–û—Ç–∫—Ä–æ–π—Ç–µ `/cap-analysis` –≤ –±—Ä–∞—É–∑–µ—Ä–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** 